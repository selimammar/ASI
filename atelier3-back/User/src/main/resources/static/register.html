<!DOCTYPE html>
<html>

<head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properties -->
    <title>Grid Example - Semantic</title>

    <!-- <link rel="stylesheet" type="text/css" href="../lib/Semantic-UI-CSS-master/semantic.min.css"> -->
    <link rel="stylesheet" type="text/css" href="css/custom.css">

</head>
<script>
    async function RegisterUser() {
    // appel de la crÃ©ation d'un user
    var firstname = document.getElementById("firstname").value;
    var lastname = document.getElementById("lastname").value;
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    var sold = 0;


    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");

    var raw = JSON.stringify({
        "email": email,
        "name": lastname,
        "surname": firstname,
        "password": password,
        "sold": sold,
        
    });

    let response = await fetch('http://localhost:8082/auth/register', { method: 'POST', headers: { 'Content-Type': 'application/json;charset=utf-8' }, body: raw });
    let result = await response.json(); alert(result.message);

    // var requestOptions = {
    // method: 'POST',
    // headers: myHeaders,
    // body: raw,
    // redirect: 'follow'
    // };

    // console.log(requestOptions);

    // fetch("http://localhost:8082/auth/register", requestOptions)
    // .then(response => response.text())
    // .then(function(response){
    //     console.log(response);
    // })
    // .then(result => console.log(result))
    // .catch(error => console.log('error', error));
    // console.log("Register d'un user");
}
</script>
<body>

    <div class="ui container">
        <h1>Register Form</h1>
        <div class="ui segment">

            <form class="ui form" id="form">
                <div class="field">
                    <label>Lastname</label>
                    <input type="text" name="lastname" placeholder="Lastname" id="lastname">
                </div>

                <div class="field">
                    <label>Firstname</label>
                    <input type="text" name="firstname" placeholder="Firstname" id="firstname">
                </div>

                <div class="field">
                    <label>Email</label>
                    <input type="text" name="email" placeholder="Email" id="email">
                </div>

                <div class="field">
                    <label>Password</label>
                    <input type="password" name="password" placeholder="Password" id="password">
                </div>

                <button class="ui button" type="submit" onclick="RegisterUser()">Submit</button>
            </form>
        </div>

        <div class="ui divider"></div>

        <div class="ui message">
            <div class="header">
                Or
            </div>
            <a href="./login.html" class="ui button">
                Login now
            </a>
        </div>
    </div>



</body>

</html>